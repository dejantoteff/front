{"remainingRequest":"/home/just/repos/front/node_modules/thread-loader/dist/cjs.js??ref--4-1!/home/just/repos/front/node_modules/ts-loader/index.js??ref--4-2!/home/just/repos/front/src/user/reducers.ts","dependencies":[{"path":"/home/just/repos/front/src/user/reducers.ts","mtime":1519649050271},{"path":"/home/just/repos/front/node_modules/cache-loader/dist/cjs.js","mtime":1520676156713},{"path":"/home/just/repos/front/node_modules/thread-loader/dist/cjs.js","mtime":1520676204585},{"path":"/home/just/repos/front/node_modules/ts-loader/index.js","mtime":1520676144729}],"contextDependencies":[],"result":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst rambdax_1 = require(\"rambdax\");\nconst constants_1 = require(\"../constants\");\nconst constants_2 = require(\"../constants\");\nconst removeCredentials_1 = require(\"./_helpers/removeCredentials\");\nconst initialState = { ready: false };\nfunction whenInitReady(payload, state) {\n    const isPayloadEmpty = rambdax_1.equals(payload.userData.forRootReducer, {});\n    if (isPayloadEmpty) {\n        return state;\n    }\n    const data = rambdax_1.omit('_id,_rev', payload.userData.userDoc);\n    return Object.assign({}, state, { data, ready: true });\n}\nfunction userStore(state = initialState, action) {\n    switch (action.type) {\n        case constants_2.INIT_READY:\n            return whenInitReady(action.payload, state);\n        case constants_1.USER_LOGOUT:\n            removeCredentials_1.removeCredentials();\n            return Object.assign({}, state, { data: {}, ready: false });\n        case constants_2.POUCH_USER_READY:\n            return Object.assign({}, state, { data: action.payload.data, ready: true });\n        default:\n            return state;\n    }\n}\nexports.userStore = userStore;\n",{"version":3,"file":"/home/just/repos/front/src/user/reducers.ts","sourceRoot":"","sources":["/home/just/repos/front/src/user/reducers.ts"],"names":[],"mappings":";;AAAA,qCAAsC;AACtC,4CAA0C;AAC1C,4CAGqB;AACrB,oEAAgE;AAChE,MAAM,YAAY,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,CAAA;AAErC,uBAAuB,OAAY,EAAE,KAAgB;IACnD,MAAM,cAAc,GAAG,gBAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,EAAE,EAAE,CAAC,CAAA;IAClE,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;QAEnB,MAAM,CAAC,KAAK,CAAA;IACd,CAAC;IACD,MAAM,IAAI,GAAG,cAAI,CAAC,UAAU,EAAE,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA;IAEvD,MAAM,mBACD,KAAK,IACR,IAAI,EACJ,KAAK,EAAE,IAAI,IACZ;AAEH,CAAC;AAED,mBACE,QAAmB,YAAY,EAC/B,MAAc;IAGd,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;QACpB,KAAK,sBAAU;YACb,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,OAAO,EAAE,KAAK,CAAC,CAAA;QAC7C,KAAK,uBAAW;YACd,qCAAiB,EAAE,CAAA;YAEnB,MAAM,mBACD,KAAK,IACR,IAAI,EAAE,EAAE,EACR,KAAK,EAAE,KAAK,IACb;QACH,KAAK,4BAAgB;YACnB,MAAM,mBACD,KAAK,IACR,IAAI,EAAE,MAAM,CAAC,OAAO,CAAC,IAAI,EACzB,KAAK,EAAE,IAAI,IACZ;QACH;YACE,MAAM,CAAC,KAAK,CAAA;IAChB,CAAC;AACH,CAAC;AAzBD,8BAyBC","sourcesContent":["import { equals, omit } from 'rambdax'\nimport { USER_LOGOUT } from '../constants'\nimport {\n  INIT_READY,\n  POUCH_USER_READY,\n} from '../constants'\nimport { removeCredentials } from './_helpers/removeCredentials'\nconst initialState = { ready: false }\n\nfunction whenInitReady(payload: any, state: UserStore): UserStore {\n  const isPayloadEmpty = equals(payload.userData.forRootReducer, {})\n  if (isPayloadEmpty) {\n\n    return state\n  }\n  const data = omit('_id,_rev', payload.userData.userDoc)\n\n  return {\n    ...state,\n    data,\n    ready: true,\n  }\n\n}\n\nexport function userStore(\n  state: UserStore = initialState,\n  action: Action,\n): UserStore {\n\n  switch (action.type) {\n    case INIT_READY:\n      return whenInitReady(action.payload, state)\n    case USER_LOGOUT:\n      removeCredentials()\n\n      return {\n        ...state,\n        data: {},\n        ready: false,\n      }\n    case POUCH_USER_READY:\n      return {\n        ...state,\n        data: action.payload.data,\n        ready: true,\n      }\n    default:\n      return state\n  }\n}\n"]}]}